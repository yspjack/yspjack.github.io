---
title: 数据结构第8次作业
tags: 数据结构
---

# 图遍历（图-基本题）

给定一个无向图和一个图顶点，编程输出该图删除给定顶点前后按深度优先遍历及广度优先遍历方式遍历的图顶点序列。

给定的无向图和图顶点满足以下要求：

1. 无向图的顶点个数n大于等于3，小于等于100，输入时顶点编号用整数0～n-1表示；
2. 无向图在删除给定顶点前后都是连通的；
3. 无论何种遍历，都是从编号为0的顶点开始遍历，访问相邻顶点时按照编号从小到大的顺序访问；
4. 删除的顶点编号不为0。

<!--more-->

## 输入形式

先从标准输入中输入图的顶点个数和边的个数，两整数之间以一个空格分隔，然后从下一行开始分行输入每条边的信息（用边两端的顶点编号表示一条边，以一个空格分隔顶点编号，边的输入次序和每条边两端顶点编号的输入次序可以是任意的，但边不会重复输入），最后在新的一行上输入要删除的顶点编号。

## 输出形式

分行输出各遍历顶点序列，顶点编号之间以一个空格分隔。先输出删除给定顶点前的深度优先遍历顶点序列和广度优先遍历顶点序列，再输出删除给定顶点后的深度优先遍历顶点序列和广度优先遍历顶点序列。

## 样例输入

```
9 10
0 1
0 2
1 4
1 3
1 8
8 6
3 6
7 2
7 5
5 2
3
```

## 样例输出

```
0 1 3 6 8 4 2 5 7
0 1 2 3 4 8 5 7 6
0 1 4 8 6 2 5 7
0 1 2 4 8 5 7 6
```

## 样例说明

输入的无向图有9个顶点，10条边（如下图所示），要删除的顶点编号为3。

{% asset_img graph.jpg %}

从顶点0开始，按照深度优先和广度优先遍历的顶点序列分别为：`0 1 3 6 8 4 2 5 7`和`0 1 2 3 4 8 5 7 6`。删除编号为3的顶点后，按照深度优先和广度优先遍历的顶点序列分别为：`0 1 4 8 6 2 5 7`和`0 1 2 4 8 5 7 6`。

## 评分标准

该题要求按照深度优先和广度优先遍历方式输出删除给定顶点前后的遍历序列，提交程序名为`graphSearch.c`。

# 独立路径数计算

老张和老王酷爱爬山，每周必爬一次香山。有次两人为从东门到香炉峰共有多少条路径发生争执，于是约定一段时间内谁走过对方没有走过的路线多谁胜。

给定一线路图（无向连通图，两顶点之间可能有多条边），编程计算从起始点至终点共有多少条独立路径，并输出相关路径信息。

注：独立路径指的是从起点至终点的一条路径中至少有一条边是与别的路径中所不同的，同时路径中不存在环路。

{% asset_img path26.png %}

## 输入形式

图的顶点按照自然数（0,1,2,...,n）进行编号，其中顶点0表示起点，顶点n-1表示终点。从标准输入中首先输入两个正整数n,e，分别表示线路图的顶点的数目和边的数目，然后在接下的e行中输入每条边的信息，具体形式如下：

```
<n> <e>
<e1> <vi1> <vj1>
<e2> <vi2> <vj2>
...
<en> <vin> <vjn>
```

说明：第一行`<n>`为图的顶点数,`<e>`表示图的边数；第二行`<e1> <vi1> <vj1>`分别为边的序号（边序号的范围在[0,1000）之间，即包括0不包括1000）和这条边的两个顶点（两个顶点之间有多条边时，边的序号会不同），中间由一个空格分隔；其它类推。

## 输出形式

输出从起点0到终点n-1的所有路径（用边序号的序列表示路径且路径中不能有环），每行表示一条由起点到终点的路径（由边序号组成，中间有一个空格分隔，最后一个数字后跟回车），并且所有路径按照字典序输出。

## 样例输入

```
6 8
1 0 1
2 1 2
3 2 3
4 2 4
5 3 5
6 4 5
7 0 5
8 0 1
```

## 样例输出

```
1 2 3 5
1 2 4 6
7
8 2 3 5
8 2 4 6
```

## 样例说明

样例输入构成的图如下：

{% asset_img graph8_1.png %}

输出的第一个路径`1 2 3 5`，表示一条路径，先走1号边(顶点0到顶点1)，然后走2号边(顶点1到顶点2)，然后走3号边(顶点2到顶点3)，然后走5号边(顶点3到顶点5)到达终点。

# 最少布线（图）

网络中心计划要给主要办公科研楼间铺设光缆进行网络连通，请给出用料最少的铺设方案。

编写程序输入一个办公区域分布图及建筑物之间的距离，计算出用料最少的铺设方案（只有一组最优解，不用考虑多组解)。要求采用Prim或Kruskal算法实现。

## 输入形式

办公区域分布图的顶点（即建筑物）按照自然数（0，1，2，n-1）进行编号，从标准输入中首先输入两个正整数，分别表示线路图的顶点的数目和边的数目，然后在接下的行中输入每条边的信息，每条边占一行，具体形式如下：

```
<n> <e>
<id> <vi> <vj> <weight>
...
```

即顶点vi和vj之间边的权重是weight，边的编号是id。

## 输出形式

输出铺设光缆的最小用料数，然后另起一行输出需要铺设的边的id，并且输出的id值按照升序输出。

## 样例输入

```
6 10
1 0 1 600
2 0 2 100
3 0 3 500
4 1 2 500
5 2 3 500
6 1 4 300
7 2 4 600
8 2 5 400
9 3 5 200
10 4 5 600
```

## 样例输出

```
1500
2 4 6 8 9
```

## 样例说明

样例输入说明该分布图有6个顶点，10条边；顶点0和1之间有条边，边的编号为1，权重为600；顶点0和2之间有条边，权重为100，其它类推。其对应图如下：

{% asset_img graph8_2.png %}

经计算此图的最少用料是1500，可以使图连通，边的编号是`2 4 6 8 9`。其对应的最小生成树如下：

{% asset_img graph8_3.png %}

# 北京地铁乘坐线路查询

编写一个程序实现北京地铁最短乘坐（站）线路查询，输入为起始站名和目的站名，输出为从起始站到目的站的最短乘坐站换乘线路。注：1. 要求采用Dijkstra算法实现；2）如果两站间存在多条最短路径，找出其中的一条就行。

{% asset_img subway26.png %}

## 输入形式

文件bgstations.txt为数据文件（可从课程网站中课程信息处下载），包含了北京地铁的线路及车站信息。其格式如下：

```
<地铁线路总条数>
<线路1> <线路1站数>
<站名1> <换乘状态>
<站名2> <换乘状态>
...
<线路2> <线路2站数>
<站名1> <换乘状态>
<站名2> <换乘状态>
...
```

说明：文件第一行为地铁总线路数；第二行第一个数为某条地铁线线号（如，1为1号线），第二个数为该条地铁线的总站数（如1号线共有23站），两数之间由一个空格分隔；第三行两个数据分别为地铁站名及换乘状态（0为非换乘站，1为换乘站），两数据间由一个空格分隔；以下同，依次为该线地铁其它站信息。在一条线路信息之后是下条地铁线路信息，格式相同。若某条地铁线为环线，则首站与末站信息相同（如北京地铁2号线，首站信息“西直门 1” ，末站信息为“西直门 1”）。例如本题提供的`bgstations.txt`文件（下载链接: {% asset_link bgstations.txt bgstations.txt %} ）内容如下：

```
12
1 23
苹果园 0
古城 0
八角游乐园 0
八宝山 0
玉泉路 0
五棵松 0
万寿路 0
公主坟 1
军事博物馆 1
木樨地 0
南礼士路 0
复兴门 1
西单 1
...
2 19
西直门 1
积水潭 0
鼓楼大街 1
...
西直门 1
...
```

该文件表明当前北京地铁共有12条线路（不含郊区线路），接着为每条线路信息。

打开当前目录下文件`bgstations.txt`，读入地铁线路信息，并从标准输入中读入起始站和目的站名（均为字符串，各占一行）。

## 输出形式

输出从起始站到目的站的乘坐信息，要求乘坐站数最少。换乘信息格式如下：

`SSN-n1(m1)-S1-n2(m2)-...-ESN`

其中：SSN和ESN分别为起始站名和目的站名；n为乘坐的地铁线路号，m为乘坐站数。

## 样例输入

```
西土城
北京西站
```

## 样例输出

`西土城-10(1)-知春路-13(2)-西直门-4(2)-国家图书馆-9(4)-北京西站`

（或`西土城-10(1)-知春路-13(2)-西直门-2(1)-车公庄-6(2)-白石桥南-9(3)-北京西站`）

## 样例说明

打开文件`bgstations.txt`，读入地铁线路信息，并从标准输入中读入查询起始站名为“西土城”，目的站名为“北京西站”。程序运行结果两站间最少乘坐站数的乘坐方式为“西土城站乘坐10号线1站至知春路站换乘13号线乘坐2站至西直门站换乘4号线乘坐2站至国家图书馆站换乘9号线乘坐4站至北京西站”。本样例存在两条最少站数的乘坐方式，只要找出一条就可以。

## 评分标准

对于同一个起始站和目的站，如果存在多条最少站数的乘坐方式，只要找出其中一条就可以。测试点全通过得满分。